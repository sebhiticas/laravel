{"name":"Laravel","tagline":"Laravel environment with Berkshelf Chef and Vagrant support ","body":"laravel\r\n=======\r\nLaravel environment with Berkshelf Chef and Vagrant support\r\n* Master: [![Build Status](https://api.travis-ci.org/sergiuionescu/laravel.svg?branch=master)](http://travis-ci.org/sergiuionescu/laravel)\r\n* Dev: [![Build Status](https://api.travis-ci.org/sergiuionescu/laravel.svg?branch=dev)](http://travis-ci.org/sergiuionescu/laravel)\r\n\r\n- builds a [lamp](https://github.com/sergiuionescu/lamp) environment\r\n- exposes a LWRP that allows setting up one or multiple laravel applications\r\n\r\nPhp7 support via ppa:ondrej/php.\r\n\r\nRequirements(prod)\r\n------------------\r\n* chef-solo: https://downloads.chef.io/chef-client/\r\n* berkshelf: http://berkshelf.com/\r\n\r\nRequirements(dev)\r\n-----------------\r\n* vagrant: https://www.vagrantup.com/downloads.html\r\n* chef dk: https://downloads.getchef.com/chef-dk/\r\n* virtualbox: https://www.virtualbox.org/wiki/Downloads\r\n\r\nTesting the dev environment\r\n---------------------------\r\n- Clone the repository\r\n- Go to the project root\r\n- Run kitchen converge\r\n\r\nHow to test dev environment\r\n---------------------------\r\n- Clone the repository\r\n- Go to the project root\r\n- Run \"kitchen converge\"\r\n\r\nRecipes\r\n-------\r\n- default - installs basic services and the laravel installer\r\n- test - installs laravel under '/var/www/laravel'\r\n\r\nLWRP\r\n----\r\n\r\nlaravel_app\r\n-----------\r\nCreate/delete a laravel application\r\nEx:\r\n```ruby\r\nlaravel_app \"laravel\" do\r\n  action :create\r\nend\r\n```\r\n\r\nActions\r\n-------\r\n- `:create` - installs a new laravel application via composer\r\n- `:delete` - deletes the application folder\r\n\r\nAttribute parameters\r\n--------------------\r\n- `app_name:` name attribute. Determines the installation path relative to '/var/www'.\r\n\r\n```\r\n#install the laravel application under '/var/www/laravel'\r\nlaravel_app \"laravel\" do\r\n  action :create\r\nend\r\n```\r\n\r\nCustomizing your dev environment\r\n--------------------------------\r\nThe role used to provision the dev environment, you can create your own role to fit your needs:\r\n```json\r\n{\r\n    \"name\": \"laravel\",\r\n    \"chef_type\": \"role\",\r\n    \"json_class\": \"Chef::Role\",\r\n    \"description\": \"Laravel environment configuration.\",\r\n    \"run_list\": [\r\n        \"recipe[laravel]\",\r\n        \"recipe[lamp::nfs]\",\r\n        \"recipe[lamp::xdebug]\"\r\n    ],\r\n    \"default_attributes\": {\r\n        \"lamp\": {\r\n            \"xdebug\": {\r\n                \"directives\": {\r\n                    \"remote_host\": \"10.0.2.2\",\r\n                    \"remote_enable\": 0,\r\n                    \"remote_autostart\": 1\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nDetails:\r\n```json\r\n\"run_list\": [\r\n        \"recipe[laravel]\",\r\n        \"recipe[lamp::nfs]\",\r\n        \"recipe[lamp::xdebug]\"\r\n    ],\r\n```\r\nThe recipes lamp::nfs and lamp::xdebug are only required for the dev environment to expose a nfs share of your /var/www directory and install the xdebug extension for php.\r\n\r\n\r\n```json\r\n\"mysql\": {\r\n    \"server_root_password\": \"\",\r\n    \"server_repl_password\": \"\",\r\n    \"server_debian_password\": \"\"\r\n}\r\n```\r\nConfigure your mysql dev server credentials.\r\n\r\n```json\r\n\"lamp\": {\r\n    \"xdebug\": {\r\n        \"directives\": {\r\n            \"remote_host\": \"10.0.2.2\",\r\n            \"remote_enable\": 0,\r\n            \"remote_autostart\": 1\r\n        }\r\n    }\r\n}\r\n```\r\nSet the xdebug configuration, all xdebug configuration directives are supported here. In this example xdebug is connecting back on the vm's NAT interface, \r\nconfigured to start the debugging session automatically but disabled. You need to enable it manually by editing your xdebug.ini.\r\n\r\nSample role with php7 support.\r\n\r\nPhp 7 is supported via ppa. The are a number of overwrite attributes that need to be set as long with a path for the php cookbook to disable pear and pecl update.\r\n```json\r\n{\r\n    \"name\": \"laravel\",\r\n    \"chef_type\": \"role\",\r\n    \"json_class\": \"Chef::Role\",\r\n    \"description\": \"Laravel environment configuration.\",\r\n    \"run_list\": [\r\n        \"recipe[laravel]\",\r\n        \"recipe[laravel::test]\",\r\n        \"recipe[lamp::nfs]\",\r\n        \"recipe[lamp::xdebug]\"\r\n    ],\r\n    \"default_attributes\": {\r\n        \"lamp\": {\r\n            \"xdebug\": {\r\n                \"directives\": {\r\n                    \"remote_host\": \"10.0.2.2\",\r\n                    \"remote_enable\": 0,\r\n                    \"remote_autostart\": 1\r\n                }\r\n            }\r\n        }\r\n    },\r\n    \"override_attributes\": {\r\n        \"php\": {\r\n            \"version\": \"7.0\",\r\n            \"conf_dir\": \"/etc/php/7.0/cli\",\r\n            \"packages\": [\r\n                \"php7.0-cgi\",\r\n                \"php7.0\",\r\n                \"php7.0-dev\",\r\n                \"php7.0-cli\",\r\n                \"php7.0-json\",\r\n                \"php7.0-curl\",\r\n                \"php7.0-mbstring\",\r\n                \"php-pear\"\r\n            ],\r\n            \"mysql\": {\r\n                \"package\": \"php7.0-mysql\"\r\n            },\r\n            \"fpm_package\": \"php7.0-fpm\",\r\n            \"fpm_pooldir\": \"/etc/php/7.0/fpm/pool.d\",\r\n            \"fpm_service\": \"php7.0-fpm\",\r\n            \"fpm_default_conf\": \"/etc/php/7.0/fpm/pool.d/www.conf\"\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nCustomizing the role in production\r\n----------------------------------\r\n\r\nAn example role for production would be the following:\r\n```json\r\n{\r\n    \"name\": \"Laravel\",\r\n    \"chef_type\": \"role\",\r\n    \"json_class\": \"Chef::Role\",\r\n    \"description\": \"Laravel environment configuration.\",\r\n    \"run_list\": [\r\n        \"recipe[laravel]\"\r\n    ],\r\n    \"default_attributes\": {\r\n        \"mysql\": {\r\n            \"server_root_password\": \"supersecretpassword\",\r\n            \"server_repl_password\": \"supersecretpassword\",\r\n            \"server_debian_password\": \"supersecretpassword\"\r\n        }\r\n    }\r\n}\r\n```\r\nNotice that you can drop the dependencies on nfs and xdebug, you should also set a more secure password for your mysql server.\r\n\r\nSource mounts\r\n-------------\r\n\r\nThe project root directory is mounted inside the dev virtual machine directory under the /vagrant path when using both kitchen converge or vagrant up to launch the machine.\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}